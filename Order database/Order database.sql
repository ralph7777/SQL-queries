-- STEP1:drop tables

DROP TABLE REQUEST;

DROP TABLE FULLORDER;

DROP TABLE CUSTOMER;

DROP TABLE PRODUCT;


-- STEP2:create four new tables

CREATE TABLE CUSTOMER
(
	CustomerID NUMBER(3),
	Name VARCHAR(32),
	Address VARCHAR(16),

	CONSTRAINT PK_CUSTOMER
	PRIMARY KEY (CustomerID)
);

CREATE TABLE FULLORDER
(
	OrderID NUMBER(4),
	OrderDate DATE,
	CustomerID NUMBER(3),

	CONSTRAINT PK_FULLORDER
	PRIMARY KEY (OrderID),

	CONSTRAINT FK_FULLORDER
	FOREIGN KEY (CustomerID)
	REFERENCES CUSTOMER (CustomerID)
);

CREATE TABLE PRODUCT
(
	ProductID NUMBER(2),
	Description VARCHAR(30),
	Finish VARCHAR(10),
	Price NUMBER(5,2)
	CHECK (Price >= 0),

	CONSTRAINT PK_PRODUCT
	PRIMARY KEY (ProductID)
);

CREATE TABLE REQUEST
(
	OrderID NUMBER(4),
	ProductID NUMBER(2),
	Quantity NUMBER(3)
	CHECK ((Quantity >= 1) AND (Quantity <= 100)),

	CONSTRAINT PK_REQUEST
	PRIMARY KEY (OrderID,ProductID),

	CONSTRAINT FK_REQUEST
	FOREIGN KEY (OrderID)
	REFERENCES FULLORDER (OrderID),

	CONSTRAINT FK_REQUEST2
	FOREIGN KEY (ProductID)
	REFERENCES PRODUCT (ProductID)
);


-- STEP3:insert tuples

INSERT INTO CUSTOMER
VALUES ( 2, 'CASUAL FURNITURE', 'PLANO, TX');

INSERT INTO CUSTOMER
VALUES ( 6, 'MOUNTAIN GALLERY', 'BOULDER, CO');


INSERT INTO FULLORDER
VALUES ( 1006, DATE '2010-03-24', 2);

INSERT INTO FULLORDER
VALUES ( 1007, DATE '2010-03-25', 6);

INSERT INTO FULLORDER
VALUES ( 1008, DATE '2010-03-25', 6);

INSERT INTO FULLORDER
VALUES ( 1009, DATE '2010-03-26', 2);


INSERT INTO PRODUCT
VALUES ( 10, 'WRITING DEST', 'OAK', 425);

INSERT INTO PRODUCT
VALUES ( 30, 'DINING TABLE', 'ASH', 600);

INSERT INTO PRODUCT
VALUES ( 40, 'ENTERTAINMENT CENTER', 'MAPLE', 650);

INSERT INTO PRODUCT
VALUES ( 70, 'CHILDRENS DRESSER', 'PINE', 300);


INSERT INTO REQUEST
VALUES ( 1006, 10, 4);

INSERT INTO REQUEST
VALUES ( 1006, 30, 2);

INSERT INTO REQUEST
VALUES ( 1006, 40, 1);

INSERT INTO REQUEST
VALUES ( 1007, 40, 3);

INSERT INTO REQUEST
VALUES ( 1007, 70, 1);

INSERT INTO REQUEST
VALUES ( 1008, 70, 1);

INSERT INTO REQUEST
VALUES ( 1009, 10, 1);

INSERT INTO REQUEST
VALUES ( 1009, 40, 1);


-- STEP4:display the table contents

SELECT * FROM CUSTOMER;

SELECT * FROM FULLORDER;

SELECT * FROM PRODUCT;

SELECT * FROM REQUEST;